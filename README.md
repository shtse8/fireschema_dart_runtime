# üî• fireschema_dart_runtime

[![pub version](https://img.shields.io/pub/v/fireschema_dart_runtime.svg)](https://pub.dev/packages/fireschema_dart_runtime)

**Build Type-Safe Flutter & Dart Apps with Firestore!**

This package is the runtime engine for Dart code generated by [FireSchema](https://github.com/shtse8/FireSchema), the ultimate tool for bringing structure and safety to your Firestore data access.

## Say Goodbye to `Map<String, dynamic>` Hell!

Developing Flutter apps with Firestore often means dealing with:

-   Constant casting: `(snapshot.data() as Map<String, dynamic>)['userName']`.
-   Runtime errors due to typos in field names.
-   Manual `fromJson`/`toJson` methods prone to errors and boilerplate.
-   Lack of compile-time safety for queries and updates.

This makes your Dart code verbose, error-prone, and harder to maintain.

## FireSchema + This Runtime = Flutter Firestore Heaven üíô

**FireSchema** reads your JSON Schema definition and generates fully type-safe Dart models, collection references, query builders, and update builders.

This **`fireschema_dart_runtime`** package provides the essential Dart base classes and utilities that the generated code depends on. It integrates smoothly with the official `cloud_firestore` package.

**Key Advantages:**

-   **üîí Compile-Time Safety:** Catch Firestore data errors *before* they reach your users.
-   **üöÄ Faster Development:** Write less code, build faster. Enjoy autocompletion for fields, queries, and updates in your IDE.
-   **‚úÖ Increased Reliability:** Eliminate runtime crashes caused by incorrect data structures or field names.
-   **üì± Perfect For:** Flutter applications (iOS, Android, Web, Desktop) and any Dart project using the `cloud_firestore` package.

## Installation

This package is meant to be used alongside code generated by the `fireschema` tool. Add both this runtime and `cloud_firestore` to your `pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  cloud_firestore: ^latest # Use the latest version
  fireschema_dart_runtime: ^latest # Use the latest version

  # Your other dependencies...
```

Then run `flutter pub get`.

## Usage

You'll primarily work with the Dart classes generated by the `fireschema` CLI tool, which rely on this runtime package.

**Example (using generated code):**

```dart
import 'package:cloud_firestore/cloud_firestore.dart';
import '_setup.dart'; // Your initialized Firestore instance
import 'generated/firestore/users_collection.dart'; // Generated by FireSchema
import 'generated/firestore/users_data.dart'; // Generated by FireSchema

final usersCollection = UsersCollection(firestore: firestore); // Generated class uses this runtime

Future<void> runDart() async {
  final newUser = UsersAddData(displayName: 'Dart User', email: 'dart@example.com', status: UserStatus.active);
  final newUserRef = await usersCollection.add(newUser); // Type-safe add!
  print('Dart Added: ${newUserRef.id}');

  final fetchedUser = await usersCollection.get(newUserRef.id); // Type-safe get!
  print('Dart Fetched: ${fetchedUser?.displayName}');

  // Type-safe query!
  final activeUsers = await usersCollection.query()
      .whereIsActive(isEqualTo: true)
      .limit(10)
      .getData();
  print('Dart Active Users: ${activeUsers.length}');

  // Type-safe update!
  await usersCollection.update(newUserRef.id)
      .incrementAge(1)
      .setLastLoginToServerTimestamp() // Handles server timestamp!
      .commit();
  print('Dart Updated: ${newUserRef.id}');
}
```

## Explore the Full FireSchema Ecosystem!

This runtime package is your key to type-safe Dart Firestore code. To learn how to define your schema and generate code for Dart and other platforms, visit the main FireSchema documentation:

**‚û°Ô∏è [Full FireSchema Documentation & Guides](https://shtse8.github.io/FireSchema/)**

---

*This package provides the runtime support for the `dart-client` target in FireSchema.*
